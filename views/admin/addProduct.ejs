<%- include('../partials/adminHeader.ejs')%>





<div class="col py-3">
    <section>
      <div class="mask d-flex align-items-center h-100 gradient-custom-3">
        <div class="container h-100">
          <div
            class="row d-flex justify-content-center align-items-center h-100"
          >
            <div class="col-12 col-md-9 col-lg-7 col-xl-6">
              <div class="card" style="border-radius: 15px">
                <div class="card-body p-5">
                  <h5 class="text-uppercase text-center mb-5">Add Product</h5>

                  <form
                    action=""
                    method="post"
                    enctype="multipart/form-data"
                    onsubmit="return validateAddProduct(this);"
                  >
                    <div class="form-outline mb-4">
                      <label class="form-label" for="form3Example1cg"
                        ></label
                      >
                      <input
                        type="text"
                        id="product"
                        name="item_name"
                        class="form-control form-control-lg"
                        placeholder="Product Name"
                      />
                      <p id="nameError" style="color: red"></p>
                    </div>

                    <div class="form-outline mb-4">
                      <label class="form-label" for="form3Example3cg"
                        ></label
                      >
                      <input
                        type="num"
                        id="price"
                        name="price"
                        class="form-control form-control-lg"
                        placeholder="Price"
                      />
                      <p id="priceError" style="color: red"></p>
                    </div>

                    <div class="form-outline mb-4 w-100px">
                      
                      
                      <select
                      class="form-select form-select-sm" style="width: 200px;" aria-label=".form-select-sm example"
                        id="category"
                        name="category"
                        
                      >
                      <option selected>Category</option>
                        <% categories.forEach((category)=>{ %>
                           

                        <option><%= category.name %></option>
                        <% }) %>
                      </select>
                    </div>
<div class="form-outline mb-4">
                      <label class="form-label" for="form3Example4cdg"
                        ></label
                      >
                      <input
                        type="text"
                        id="description"
                        name="des"
                        class="form-control form-control-lg"
                        placeholder="Description"
                      />
                      <p id="descriptionError" style="color: red"></p>
                    </div>
                    <div class="form-outline mb-4">
                      <label class="form-label" for="form3Example4cdg"
                        ></label
                      >
                      <input
                        type="num"
                        id="stock"
                        name="stock"
                        class="form-control form-control-lg"
                        placeholder="Stock"
                      />
                      <p id="stockError" style="color: red"></p>
                    </div>
                    <div class="form-outline mb-4">
                      <label class="form-label" for="customFile"
                        ></label
                      >
                      <input
                        type="file"
                        id="image"
                        name="image"
                        class="form-control"
                        required

                        placeholder="Choose image"
                        multiple
                      />
                    </div>
                   
                    <div class="d-flex justify-content-center">
                      <button
                        type="submit"
                        value="submit"
                        class="btn text-white"
                        style="background-color: #191097"
                      >
                        Add Product
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>
</div>
<style></style>

<script>
let result = document.querySelector(".result"),
  img_result = document.querySelector(".img-result"),
  img_w = document.querySelector(".img-w"),
  img_h = document.querySelector(".img-h"),
  options = document.querySelector(".options"),
  save = document.querySelector(".save"),
  cropped = document.querySelector(".cropped"),
  dwn = document.querySelector(".download"),
  upload = document.querySelector("#file-input"),
  newImage = document.getElementById("file-input");
cropper = "";
// on change show image with crop options
upload.addEventListener("change", (e) => {
  if (e.target.files.length) {
    // start file reader
    const reader = new FileReader();
    reader.onload = (e) => {
      if (e.target.result) {
        // create new image
        var img = document.createElement("img");
        img.id = "image";
        img.src = e.target.result;

        // clean result before
        result.innerHTML = "";
        // append new image
        result.appendChild(img);

        // show save btn and options
        save.classList.remove("hide");
        options.classList.remove("hide");
        // init cropper
        cropper = new Cropper(img);
      }
    };
    reader.readAsDataURL(e.target.files[0]);
  }
});

// save on click
save.addEventListener("click", (e) => {
  e.preventDefault();
  // get result to data uri
  let imgSrc = cropper
    .getCroppedCanvas({
      width: img_w.value, // input value
    })
    .toDataURL();
  // remove hide class of img
  cropped.classList.remove("hide");
  img_result.classList.remove("hide");
  // show image cropped
  cropped.src = imgSrc;
  dwn.classList.remove("hide");
  dwn.download = "imagename.png";
  dwn.setAttribute("href", imgSrc);
});
</script>







<%- include('../partials/footer.ejs')%>